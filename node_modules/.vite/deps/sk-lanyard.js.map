{
  "version": 3,
  "sources": ["../../sk-lanyard/dist/index.js"],
  "sourcesContent": ["import*as e from\"svelte/store\";var n={};(()=>{n.d=(e,t)=>{for(var r in t){if(n.o(t,r)&&!n.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}}})();(()=>{n.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})();if(typeof n!==\"undefined\")n.ab=new URL(\".\",import.meta.url).pathname.slice(import.meta.url.match(/^file:\\/\\/\\/\\w:/)?1:0,-1)+\"/\";var t={};n.d(t,{D:()=>s,q:()=>useLanyard});var x=e=>{var t={};n.d(t,e);return t};var y=e=>()=>e;const r=x({[\"readable\"]:()=>e.readable});var s;(function(e){e[e[\"EVENT\"]=0]=\"EVENT\";e[e[\"HELLO\"]=1]=\"HELLO\";e[e[\"INITIALIZE\"]=2]=\"INITIALIZE\";e[e[\"HEARTBEAT\"]=3]=\"HEARTBEAT\"})(s||(s={}));const a=\"https://api.lanyard.rest/v1\";const o=\"wss://api.lanyard.rest/socket\";function useLanyard(e){if(e.method===\"rest\"){const n=(0,r.readable)(undefined,(n=>{lanyardRest(e,n)}));return n}if(e.method===\"ws\"){if(\"id\"in e){const n=(0,r.readable)(undefined,(n=>{lanyardWS(e,n)}));return n}const n=(0,r.readable)(undefined,(n=>{lanyardWS(e,n)}));return n}}async function lanyardRest(e,n){if(typeof window===\"undefined\"){return}const t=e.restUrl??a;const lanyardFetch=async()=>await fetch(`${t}/users/${e.id}`).then((e=>e.json()));const updateStore=async()=>{const e=await lanyardFetch();if(e.success){n(e.data)}else{throw new Error(e.error.message)}};updateStore();setInterval(updateStore,e.pollInterval??5e3)}async function lanyardWS(e,n){if(typeof window===\"undefined\"){return}const t=e.wsUrl??o;const r=new WebSocket(t);const send=e=>r.send(JSON.stringify(e));const recv=e=>{r.addEventListener(\"message\",e)};const once=()=>new Promise((e=>{const fn=n=>{r.removeEventListener(\"message\",fn);e(JSON.parse(n.data))};r.addEventListener(\"message\",fn)}));const waitInit=()=>new Promise(((e,n)=>{const open=()=>{r.removeEventListener(\"open\",open);e()};r.addEventListener(\"open\",open);const err=()=>{r.removeEventListener(\"error\",err);n()};r.addEventListener(\"error\",err)}));await waitInit();if(\"all\"in e){send({op:s.INITIALIZE,d:{subscribe_to_all:true}})}if(\"ids\"in e){send({op:s.INITIALIZE,d:{subscribe_to_ids:e.ids}})}if(\"id\"in e){send({op:s.INITIALIZE,d:{subscribe_to_id:e.id}})}const a=await once();const d=a.d.heartbeat_interval;const heartbeat=()=>{send({op:s.HEARTBEAT,d:undefined})};setInterval(heartbeat,d);const i=await once();const c=i.d;n(c);recv((e=>{const t=JSON.parse(e.data);if(\"user_id\"in t.d){const{user_id:e,...r}=t.d;c[t.d.user_id]=r;n(c)}else{n({...t.d})}}))}var d=t.D;var i=t.q;export{d as LanyardOpcode,i as useLanyard};"],
  "mappings": "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",
  "names": ["t", "r", "n", "n", "t", "e", "r", "a", "d", "i"]
}
